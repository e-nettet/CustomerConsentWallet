import Ember from 'ember';

export default Ember.Service.extend({
  web3: Ember.inject.service(),
  contractAddress: '0x8fc0EC8fcc05DF7B1088409e086Ba42dC543f8A4',
  abi: [ { "constant": false, "inputs": [ { "name": "customer", "type": "address" }, { "name": "data_owner", "type": "address" }, { "name": "id", "type": "bytes16" } ], "name": "requestConsent", "outputs": [], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "bytes16" } ], "name": "id_mapping", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "payable": false, "type": "function" }, { "constant": false, "inputs": [ { "name": "data_requester", "type": "address" }, { "name": "data_owner", "type": "address" }, { "name": "id", "type": "bytes16" } ], "name": "giveConsent", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" }, { "name": "", "type": "uint256" } ], "name": "customer_mapping", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "customer", "type": "address" } ], "name": "customerConsents", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "payable": false, "type": "function" }, { "constant": false, "inputs": [ { "name": "data_requester", "type": "address" }, { "name": "data_owner", "type": "address" }, { "name": "id", "type": "bytes16" } ], "name": "revokeConsent", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "consents", "outputs": [ { "name": "id", "type": "bytes16", "value": "0x" }, { "name": "data_requester", "type": "address", "value": "0x" }, { "name": "customer", "type": "address", "value": "0x" }, { "name": "data_owner", "type": "address", "value": "0x" }, { "name": "state", "type": "uint8", "value": "0" } ], "payable": false, "type": "function" }, { "inputs": [], "payable": false, "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "customer", "type": "address" }, { "indexed": false, "name": "data_owner", "type": "address" }, { "indexed": false, "name": "data_requester", "type": "address" }, { "indexed": false, "name": "id", "type": "bytes16" } ], "name": "ConsentGiven", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "customer", "type": "address" }, { "indexed": false, "name": "data_owner", "type": "address" }, { "indexed": false, "name": "data_requester", "type": "address" }, { "indexed": false, "name": "id", "type": "bytes16" } ], "name": "ConsentRevoked", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "customer", "type": "address" }, { "indexed": false, "name": "data_owner", "type": "address" }, { "indexed": false, "name": "data_requester", "type": "address" }, { "indexed": false, "name": "id", "type": "bytes16" } ], "name": "ConsentRequested", "type": "event" } ],

  getConsentContract: function() {
    let web3 = this.get("web3").instance();
    let consent = web3.eth.contract(this.get("abi")).at(this.get("contractAddress"));
    return consent;
  }
});
