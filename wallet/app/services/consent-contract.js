import Ember from 'ember';

export default Ember.Service.extend({
  web3: Ember.inject.service(),
  contractAddress: '0x700355626605434510B7396e6DB3e752aC78739f',
  abi: [ { "constant": false, "inputs": [ { "name": "customer", "type": "address" }, { "name": "data_owner", "type": "address" }, { "name": "id", "type": "bytes16" } ], "name": "requestConsent", "outputs": [], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "bytes16" } ], "name": "id_mapping", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "payable": false, "type": "function" }, { "constant": false, "inputs": [], "name": "kill", "outputs": [], "payable": false, "type": "function" }, { "constant": false, "inputs": [ { "name": "data_requester", "type": "address" }, { "name": "data_owner", "type": "address" }, { "name": "id", "type": "bytes16" }, { "name": "state", "type": "uint8" } ], "name": "updateConsent", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" }, { "name": "", "type": "uint256" } ], "name": "customer_mapping", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "index", "type": "uint256" } ], "name": "getConsent", "outputs": [ { "name": "", "type": "address", "value": "0x" }, { "name": "", "type": "address", "value": "0x" }, { "name": "", "type": "address", "value": "0x" }, { "name": "", "type": "uint8", "value": "0" }, { "name": "", "type": "bytes16", "value": "0x" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "customer", "type": "address" } ], "name": "customerConsents", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "payable": false, "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "consents", "outputs": [ { "name": "id", "type": "bytes16", "value": "0x" }, { "name": "data_requester", "type": "address", "value": "0x" }, { "name": "customer", "type": "address", "value": "0x" }, { "name": "data_owner", "type": "address", "value": "0x" }, { "name": "state", "type": "uint8", "value": "0" } ], "payable": false, "type": "function" }, { "inputs": [], "payable": true, "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "customer", "type": "address" }, { "indexed": false, "name": "data_owner", "type": "address" }, { "indexed": false, "name": "data_requester", "type": "address" }, { "indexed": false, "name": "id", "type": "bytes16" } ], "name": "ConsentRequested", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "updated", "type": "bool" }, { "indexed": false, "name": "customer", "type": "address" }, { "indexed": false, "name": "data_owner", "type": "address" }, { "indexed": false, "name": "data_requester", "type": "address" }, { "indexed": false, "name": "state", "type": "uint8" }, { "indexed": false, "name": "id", "type": "bytes16" } ], "name": "ConsentUpdated", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "x", "type": "address" } ], "name": "PrintAddress", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "x", "type": "string" } ], "name": "PrintString", "type": "event" } ],

  getConsentContract: function() {
    let web3 = this.get("web3").instance();
    let consent = web3.eth.contract(this.get("abi")).at(this.get("contractAddress"));
    return consent;
  }
});
